{% extends "base.html" %}
{% block head %}
<link rel="stylesheet" href="{{url_for('static', filename='css/minecraft.css')}}">
{% endblock %}

{% block content %}

    <nav class="navbar">
        
        <h1>Laboratório de Alimentação e Alguma Coisa</h1>
        <div class="right-items">
            <!-- Aqui será exibido a data e o horário -->
            <span id="datetime"></span>
        </div>
    </nav>
    <div class="content p-3">
        <div class="text-center">
            <h1>bateria</h1>

            <div class="container">
                <div class="battery">
                    <div class="level" id="battery-level"></div>
                    <div class="symbol">⚡</div>
                </div>
                <div class="trena">
                    <div class="marcador marcador-10"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    
                    <div class="marcador marcador-5"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-5"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-5"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-5"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-1"></div>
                    <div class="marcador marcador-5"></div>
                    <div class="marcador marcador-10"></div>

                    <div class="label label-top">100</div>
                    <div class="label label-middle">50</div>
                    <div class="label label-bottom">0</div>
                </div>
                <div class="gauge">
                    <div class="pin" id="gauge-marker"><span id="gauge-text">100%</span></div>

                </div>
                <div class="info-panel">
                    <div class="info-row">
                        <span>Capacidade:</span>
                        <span>+250.000 Ah</span>
                    </div>
                    <div class="info-row">
                        <span>Tensão (System):</span>
                        <span>55.10 V</span>
                    </div>
                    <div class="info-row">
                        <span>Tensão inicial:</span>
                        <span>0.00 V</span>
                    </div>
                    <div class="info-row">
                        <span>Corrente:</span>
                        <span>+0.00 A</span>
                    </div>
                    <div class="info-row">
                        <span>Potência:</span>
                        <span>+0.00 W</span>
                    </div>
                    <div class="info-row">
                        <span>Temperatura:</span>
                        <span>+27.00 °C</span>
                    </div>
                    <div class="info-row">
                        <span>Estado da carga:</span>
                        <span>100%</span>
                    </div>
                </div>
            </div>
            

            <div class="chart-container">
                <canvas id="chart1"></canvas>
                <canvas id="chart2"></canvas>
            </div>
        
            <script>
                function updateBatteryAndGauge(level) {
                    const batteryLevel = document.getElementById('battery-level');
                    const gaugeMarker = document.getElementById('gauge-marker');
                    const gaugeText = document.getElementById('gauge-text');
            
                    // Ajusta o nível da bateria
                    batteryLevel.style.height = level + '%';
            
                    // Ajusta a posição do marcador na régua
                    const gaugeHeight = 150; // Altura total da régua
                    const markerHeight = 30; // Altura do marcador
                    const maxMarkerPosition = gaugeHeight - markerHeight / 2; // Posição máxima para o marcador
            
                    // Calcula a posição do marcador
                    const levelPosition = level * 1.5; // Calcula a posição do marcador baseada no nível da bateria
                    const markerPosition = gaugeHeight - levelPosition;
            
                    // Limita a posição do marcador para não sair da régua
                    gaugeMarker.style.top = Math.max(-markerHeight / 2, Math.min(maxMarkerPosition, markerPosition)) + 'px';
                    
                    // Exibe o nível atual no marcador
                    gaugeText.textContent = level + '%';
                    
                    // Alterar cor da bateria conforme o nível
                    if (level > 50) {
                        batteryLevel.style.backgroundColor = '#76c7c0'; // Verde
                    } else if (level > 20) {
                        batteryLevel.style.backgroundColor = '#f5d76e'; // Amarelo
                    } else {
                        batteryLevel.style.backgroundColor = '#e74c3c'; // Vermelho
                    }
                }
            
                function simulateBattery() {
                    let level = 100;
                    let direction = -1; // -1 para descarregar, 1 para carregar
            
                    setInterval(() => {
                        level += direction * 1;
                        if (level <= 0 || level >= 100) {
                            direction *= -1; // Inverte a direção quando chegar a 0% ou 100%
                        }
                        updateBatteryAndGauge(level); // Atualiza tanto o nível da bateria quanto o marcador
                    }, 50); // Altera o nível a cada 1 segundo
                }
            
                simulateBattery(); // Inicia a simulação
            </script>

            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                
            <script>
                var ctx1 = document.getElementById('chart1').getContext('2d');
                var chart1 = new Chart(ctx1, {
                    type: 'line',
                    data: {
                        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
                        datasets: [{
                            label: 'Sales Over Time',
                            data: [65, 59, 80, 81, 56, 55, 40],
                            fill: false,
                            borderColor: 'rgba(75, 192, 192, 1)',
                            tension: 0.1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });

                // Gráfico 2
                var ctx2 = document.getElementById('chart2').getContext('2d');
                var chart2 = new Chart(ctx2, {
                    type: 'line',
                    data: {
                        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
                        datasets: [{
                            label: 'Revenue Over Time',
                            data: [50, 70, 90, 60, 80, 100, 85],
                            backgroundColor: 'rgba(153, 102, 255, 0.2)',
                            borderColor: 'rgba(153, 102, 255, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            </script>
                
        </div>
    </div>

    <script src="{{url_for('static', filename='scripts/minecraft_button.js')}}"></script>

{% endblock %}